#!/bin/sh

# Java fixes [https://wiki.archlinux.org/title/Java#Gray_window,_applications_not_resizing_with_WM,_menus_immediately_closing]
export _JAVA_AWT_WM_NONREPARENTING=1
export AWT_TOOLKIT=MToolkit

export GTK_THEME="Materia-dark-compact"

export MAIN_MONITOR="eDP"
export MAIN_MONITOR_MODE="1920x1080"
export MAIN_MONITOR_RATE="60"

export WALLPAPER_PATH="$HOME/.config/wallpapers/NieR_Theme/OrchestralArrangementAlbumCover.png"
export LOCKSCREEN_PATH="$HOME/.config/wallpapers/NieR_Theme/dod3_inappropriate.png"

# Start applications on startup
feh --bg-fill "$WALLPAPER_PATH" &
dwmblocks &
picom &
nm-applet &
dunst &
#redshift -t 5700:1000 -l 51:17 & #Latitude:Longitute of Wroclaw | Uncomment for automatic

# Disable touchpad
xinput disable "SynPS/2 Synaptics TouchPad"

# Initial settings
setxkbmap qwerty-seine
xrandr --output "$MAIN_MONITOR" --mode "$MAIN_MONITOR_MODE" --rate "$MAIN_MONITOR_MODE"

# Turn off screen functions OFF
xset s off
xset -dpms

# Turn off scary pc speaker sound
xset -b

# File picker not opening fix
if [ -d /etc/X11/xinit/xinitrc.d ] ; then
	for f in /etc/X11/xinit/xinitrc.d/?*.sh ; do
		[ -x "$f" ] && . "$f"
	done
	unset f
fi

# Start dwm
exec dwm
